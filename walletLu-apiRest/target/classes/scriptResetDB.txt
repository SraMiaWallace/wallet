
DROP TABLE TRANSACTIONTYPES;
DROP TABLE TRANSACTIONS;
DROP TABLE WALLETS;
DROP TABLE  USERS;



DROP TABLE IF EXISTS USERS;

CREATE TABLE USERS(
 USERID INT IDENTITY PRIMARY KEY,
 NAME VARCHAR(255) NOT NULL,
 LASTNAME VARCHAR(255),
 PASSWORD VARCHAR(255) 
);

INSERT INTO USERS VALUES(1, 'Alejandra', 'Lopez', '0000');
INSERT INTO USERS VALUES(2, 'Sergio', 'Gonzalez', '0000');



DROP TABLE IF EXISTS WALLETS;

CREATE TABLE WALLETS(
 WALLETID INT IDENTITY PRIMARY KEY,
 USERID INT,
 TOTALBALANCE NUMERIC(8,2) NOT NULL,
 NAME VARCHAR(255)
);

ALTER TABLE WALLETS
ADD FOREIGN KEY (USERID) 
REFERENCES USERS (USERID);

INSERT INTO WALLETS VALUES(1, 1, 1000.00, 'Cuenta Personal');
INSERT INTO WALLETS VALUES(2, 2, 500.00, 'Cuenta Casa');



DROP TABLE IF EXISTS TRANSACTIONTYPES;

CREATE TABLE TRANSACTIONTYPES(
 TRANSACTIONTYPEID INT IDENTITY PRIMARY KEY,
 NAME VARCHAR(255) NOT NULL
);

INSERT INTO TRANSACTIONTYPES VALUES(1, 'Ingreso');
INSERT INTO TRANSACTIONTYPES VALUES(2, 'Transferencia');



DROP TABLE IF EXISTS TRANSACTIONS;

CREATE TABLE TRANSACTIONS(
TRANSACTIONID INT IDENTITY PRIMARY KEY,
WALLETID INT,
TRANSACTIONTYPEID INT,
AMOUNT NUMERIC(8,2) NOT NULL,
CREATIONDATE TIMESTAMP NOT NULL
);

ALTER TABLE TRANSACTIONS
ADD FOREIGN KEY (WALLETID) 
REFERENCES WALLETS(WALLETID);